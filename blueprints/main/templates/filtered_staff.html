{% extends "base.html" %}

{% block title %}Staff Members{% endblock %}

{% block content %}
<h1>Staff Members</h1>

<!-- Corrected form structure -->
<form method="get" action="{{ url_for('main.staffdata') }}">
  <label for="department">Filter by Department:</label>
  <select name="department" id="department">
    <option value="">Select Department</option>
    {% for department in departments %}
      <option value="{{ department }}" {% if department == selected %}selected{% endif %}>{{ department }}</option>
    {% endfor %}
  </select>
  <button type="submit">Filter</button>
</form>

{% if selected %}
<p>Showing results for department: <strong>{{ selected }}</strong></p>
{% endif %}

<div>
  <div class="flex">
    {% for staff in staffData %}
    <div class="card">
      <img src="{{ staff.profile_image }}" alt="{{ staff.name }}" width="100">
      {% for key, value in staff.items() %}
        {% if key != "profile_image" %}
          <div><strong>{{ key | title }}:</strong> {{ value }}</div>
        {% endif %}
      {% endfor %}
    </div>
    {% else %}
    <p>No results found.</p>
    {% endfor %}
  </div>
</div>

{% endblock %}
